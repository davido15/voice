<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Powered Voice Assistant</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background-color: #f3f4f6;
    }
    .mic-button {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background-color: #3b82f6;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-size: 30px;
      cursor: pointer;
      box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    }
    .mic-button:hover {
      background-color: #2563eb;
    }
  </style>
</head>
<body>

  <!-- Custom Mic Button to start conversation -->
  <div class="mic-button" id="micButton">
    ðŸŽ¤
  </div>

  <script>
    const API_URL = 'https://api.elevenlabs.io/v1/conversation/start'; // Replace with actual ElevenLabs API endpoint
    const AGENT_ID = 'YOUR_AGENT_ID';  // Replace with your agent ID

    // Button to start the conversation
    const micButton = document.getElementById("micButton");

    // Voice recognition setup
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'en-US';
    recognition.continuous = false;
    recognition.interimResults = false;

    // Start the conversation when mic button is clicked
    micButton.addEventListener("click", function() {
      console.log("Starting conversation...");

      // Start voice recognition
      recognition.start();
    });

    // When the voice is recognized, send to ElevenLabs API
    recognition.onresult = async (event) => {
      const userMessage = event.results[0][0].transcript;

      console.log('User said:', userMessage);

      // Send message to ElevenLabs API
      const response = await fetch(API_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer sk_b1f548a76a483942b3658f1948019e1ffb3a62f2616d5a41'  // Replace with your API key
        },
        body: JSON.stringify({
          agent_id: RjxwQJi2L14jPiXtEmOo,
          message: userMessage,
        })
      });

      const data = await response.json();
      const aiResponse = data.message; // Assuming the response has the AI's message

      console.log('AI Response:', aiResponse);

      // You can further process the AI's response, e.g., display it on the screen, or use Text-to-Speech for the response.
    };

    recognition.onerror = function(event) {
      console.error("Speech recognition error", event.error);
    };
  </script>

</body>
</html>
